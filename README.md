Population-Weighted Coverage Analysis: Maternal & Child Health

This repository contains the code and structure for calculating population-weighted coverage of Antenatal Care (ANC4) and Skilled Birth Attendance (SBA) for countries categorized by their under-five mortality (U5MR) target status (on-track vs. off-track). The analysis uses data from the UNICEF Global Data Repository and UN World Population Prospects.
The project is designed to demonstrate a reproducible, end-to-end data analysis workflow suitable for collaborative environments.

📁 Repository Structure ⊅
.
├── .gitignore               # Specifies intentionally untracked files to ignore
├── README.md                # This file: project overview, structure, and instructions
├── user_profile.R.template  # Template for user-specific settings (paths, filenames)
├── run_project.R            # Main script to execute the entire workflow
│
├── 01_rawdata/              # Stores raw, untransformed data files
│   ├── WPP2022_GEN_F01_DEMOGRAPHIC_INDICATORS_COMPACT_REV1.xlsx
│   ├── On-track and off-track countries.xlsx
│   └── (UNICEF ANC4 and SBA data files will be placed here after manual download)
│
├── 02_scripts/              # Contains R scripts for modular functions
│   ├── data_preparation.R   # Functions for loading, cleaning, and merging data
│   ├── analysis.R           # Functions for calculating population-weighted coverage
│   └── visualization.R      # Function for creating the required plot
│
└── 03_output/               # Stores generated outputs (reports, figures)
    ├── figures/             # Subfolder for saved plots/figures
    └── (Final report will be generated here)

📝 Purpose of Each Folder and File
•	.gitignore: Tells Git which files or directories to ignore (e.g., user_profile.R, temporary files, large data files that are managed separately). This is crucial for keeping sensitive information out of the repository and preventing unnecessary version control of temporary files.
•	README.md: Provides a comprehensive overview of the project, its goals, data sources, methodology, and instructions for anyone wanting to understand or reproduce the analysis.
•	user_profile.R.template: A template file that defines machine-specific parameters (like file paths, input filenames, output settings). This file is not committed to the Git repository. Each user copies this template to user_profile.R and customizes it for their local environment.
•	run_project.R: The master script that orchestrates the entire analysis pipeline. It sources user_profile.R to load local settings, then calls functions from the 02_scripts/ folder in sequence to perform data preparation, analysis, and report generation.

•	01_rawdata/: This folder is intended for raw, immutable data. Data files should ideally be placed here and not modified directly.
o	WPP2022_GEN_F01_DEMOGRAPHIC_INDICATORS_COMPACT_REV1.xlsx: Contains UN World Population Prospects data, used for population figures.
o	On-track and off-track countries.xlsx: Contains the classification of countries based on their under-five mortality target status.
o	UNICEF Data Files (to be downloaded): This is where you will manually place the downloaded ANC4 and SBA data files from the UNICEF Global Data Repository.

•	02_scripts/: Contains modular R scripts, each encapsulating specific steps of the workflow as functions. This promotes code reusability, readability, and easier debugging.
o	data_preparation.R: Handles the loading of various data sources, cleaning country identifiers, merging datasets, and filtering for the most recent estimates within the specified time range.
o	analysis.R: Contains the logic for calculating the population-weighted averages for ANC4 and SBA.
o	visualization.R: Contains the function to generate the comparative plot for the report.

•	03_output/: This folder stores all outputs generated by the run_project.R script, ensuring that results are organized and separate from code and raw data.
o	figures/: A subfolder specifically for saving generated plots.
o	(Final Report): The generated PDF, HTML, or DOCX report will be saved directly in 03_output/.

⚙️ Instructions on How to Reproduce Your Analysis
Follow these steps to set up the project and reproduce the analysis on your local machine:
1. Initial Setup (Git & RStudio)
a. Clone the Repository:
* Open your Git Bash terminal (Windows) or Terminal (macOS/Linux).
* Navigate to your preferred local directory for Git projects (e.g., C:/Users/YourUsername/Documents/GitProjects/ or ~/Documents/GitProjects/). Ensure this directory is NOT synced by cloud services like OneDrive, Google Drive, or Dropbox for active Git repositories.
* Clone this repository:
bash git clone https://github.com/AungLwin25/MaternalCare.git # Replace with your actual repo URL 
* Navigate into the cloned directory:
bash cd MaternalCare 

b. Open as an RStudio Project:
* Open RStudio.
* Go to File > New Project...
* Select Existing Directory.
* Browse to the MaternalCare folder you just cloned (e.g., C:/Users/YourUsername/Documents/GitProjects/MaternalCare).
* Click Create Project.

2. Install Required R Packages
Ensure you have all necessary R packages installed. You can run this in your RStudio Console:
install.packages(c("readxl", "dplyr", "Hmisc", "ggplot2", "rmarkdown", "knitr"))

3. Obtain and Place Raw Data
You need to manually download the following files and place them into the 01_rawdata/ folder within your cloned MaternalCare project directory:
•	Population Data:
o	File: WPP2022_GEN_F01_DEMOGRAPHIC_INDICATORS_COMPACT_REV1.xlsx
o	Source: UN World Population Prospects, 2022 (You'll need to find this on the UN Population Division website if not provided directly).
•	Under-five Mortality Classification:
o	File: On-track and off-track countries.xlsx
o	Source: This should be provided as part of the exercise.
•	UNICEF Health Indicators (ANC4 & SBA):
o	Source: UNICEF Global Data Repository. You will need to navigate to the UNICEF data portal, find the data for ANC4 and SBA indicators at the country level for 2018-2022, and download them as CSV or Excel files.
o	Recommended Filenames (for consistency with user_profile.R.template):
	ANC4_coverage_2018-2022.csv (or .xlsx)
	SBA_coverage_2018-2022.csv (or .xlsx)
o	Place these downloaded files into the 01_rawdata/ folder.

4. Configure user_profile.R
This is a critical step for reproducibility across different machines.
a. Copy the Template:
* In your RStudio Files pane, navigate to the main project directory.
* Find user_profile.R.template.
* Copy this file and rename the copy to user_profile.R (remove the .template extension).
b. Edit user_profile.R:
* Open the newly created user_profile.R file.
* Carefully read the comments within the file.
* Update all paths and filenames to accurately reflect their location and names on your specific computer. Pay close attention to base_project_dir, main_data_filename, anc4_filename, sba_filename, etc.
* Choose your desired report_output_format ("html_document", "pdf_document", or "word_document").
* Save the user_profile.R file.
*Remember: `user_profile.R` is in your `.gitignore` and will NOT be pushed to GitHub, keeping your local settings private.*

5. Run the Project Workflow
Once all data is in place and user_profile.R is configured, you can run the entire analysis.
•	Open the run_project.R script in RStudio.
•	Click the Source button (or press Ctrl+Shift+S / Cmd+Shift+S).

This script will:
1.	Load your local settings from user_profile.R.
2.	Load and prepare all raw data.
3.	Perform the population-weighted coverage calculations.
4.	Generate the visualization.
5.	Create the final report (PDF/HTML/DOCX) in the 03_output/ folder.
6. Review Outputs
Check the 03_output/ folder for your generated report and any saved figures.

🥰 Collaborative Workflow & Reproducibility
This project structure supports collaboration and reproducibility by:
•	Version Control: All code (.R, .Rmd, .gitignore, README.md, user_profile.R.template) is version-controlled with Git and hosted on GitHub, allowing tracking of changes, collaboration via branches and pull requests, and easy access to historical versions.
•	Clear Folder Organization: Separating raw data, scripts, and outputs ensures clarity and prevents accidental modification of raw data.
•	user_profile.R for Portability: By centralizing machine-specific paths and settings, the core analysis scripts remain universal. New collaborators only need to adjust one local file.
•	run_project.R for End-to-End Execution: A single script allows anyone to run the entire analysis pipeline from start to finish, ensuring consistency and ease of reproduction.
•	R Markdown for Dynamic Reporting: Combining code, results, and narrative in report.Rmd ensures that the report is dynamically generated from the latest code and data, enhancing transparency and reproducibility of findings.

